### Постановка задачи для системы управления балансами участников в Telegram

#### Общая информация

Система предназначена для управления балансами участников группы в Telegram, с учётом начислений за участие в тренировках и внесённых платежей. Взаимодействие с системой осуществляется через Telegram-бота, который добавляется в группу и управляется как участниками, так и администратором.

#### Язык программирования и СУБД

- **Язык программирования**: Python
- **СУБД**: SQLite

#### Пользовательский интерфейс

- **Telegram-бот**: Основной интерфейс взаимодействия. Бот добавляется в группу Telegram, и участники взаимодействуют с ним через команды и кнопки.
- **Регистрация**: Участники должны начать взаимодействие с ботом в личных сообщениях, используя команду `/start`, чтобы зарегистрироваться в системе.

#### Функциональные требования

1. **Управление участниками**:
   - Участники регистрируются через команду `/start` в личных сообщениях с ботом.
   - Информация об участнике включает `telegram_id` и имя.
   - Удаление участника из группы не удаляет его данные из системы.

2. **Администрирование**:
   - Администратор назначается через команду, доступную только текущему администратору.
   - Администратор имеет доступ к дополнительным функциям, таким как просмотр балансов всех участников и назначение начального баланса.

3. **Баланс и платежи**:
   - **Увеличение баланса**: Происходит при внесении участником платежа. Платежи регистрируются с указанием суммы и даты.
   - **Уменьшение баланса**: Происходит при регистрации участника на тренировку через опрос, с учётом стоимости тренировки.
   - Участники могут узнать свой текущий баланс через команду или кнопку в интерфейсе бота.
   - Администратор может просматривать балансы всех участников.

4. **Тренировки и опросы**:
   - Администратор может создавать опросы в группе Telegram для организации тренировок.
   - Опросы содержат дату, время, место и стоимость тренировки.
   - Варианты ответов в опросе: "Смогу", "Приду с другом", "Не смогу", "Не определился".
   - Участники могут регистрироваться на тренировки через опросы, что влияет на их баланс. Если участник выбирает "Приду с другом", с его баланса списывается двойная стоимость тренировки.

5. **Начальный баланс**:
   - Начальный баланс может быть установлен администратором и учитывается при расчёте текущего баланса.
   - Начальный баланс может быть установлен несколько раз, используется значение с максимальной датой.

#### Технические детали

- Бот должен быть добавлен в группу Telegram, и ID группы должен быть указан в конфигурации бота для возможности отправки опросов.
- Все взаимодействия с ботом, кроме создания опросов, происходят в личных сообщениях.

#### Отчёты и уведомления

- Администратор может получить отчёт о балансе каждого участника.
- Участники получают уведомления о списании средств при регистрации на тренировку.

#### Команды и кнопки

- **Команды**:
  - `/start`: Регистрация участника в системе.
  - `/get_group_id`: Получение ID текущей группы.
  - `/balance`: Получение текущего баланса участника.
  - `/all_balances`: Получение балансов всех участников (только для администратора).
  - `/set_initial_balance TelegramID сумма`: Установка начального баланса для участника (только для администратора).

- **Кнопки**:
  - "Проверить баланс": Отображает текущий баланс участника.
  - "Создать опрос": Начинает процесс создания опроса для тренировки (доступно администратору).
  - "Сообщить об оплате": Начинает процесс регистрации платежа.
  - "Баланс всех участников": Отображает балансы всех участников (доступно администратору).
  - "Сменить администратора": Позволяет сменить администратора (доступно администратору).
  - "Список участников": Отображает список всех участников (доступно администратору).
  - "Установить начальный баланс": Позволяет установить начальный баланс для участника (доступно администратору).

